!function(e){if(!e.browser){e.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:navigator.userAgent.toLowerCase().indexOf("mozilla/5.0")>-1&&navigator.userAgent.toLowerCase().indexOf("android ")>-1&&navigator.userAgent.toLowerCase().indexOf("applewebkit")>-1,version:(t=navigator.userAgent,t=t.toLowerCase(),(/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[])[2]||"0")}}var t,a=null!=window.orientation,s=e.browser.opera||e.browser.mozilla&&parseFloat(e.browser.version.substr(0,3))<1.9?"input":"paste",pasteHandler=function(t){(t=e.event.fix(t||window.event)).type="paste";var a=t.target;setTimeout((function(){e.event.dispatch.call(a,t)}),1)};e.event.special.paste={setup:function(){this.addEventListener?this.addEventListener(s,pasteHandler,!1):this.attachEvent&&this.attachEvent("on"+s,pasteHandler)},teardown:function(){this.removeEventListener?this.removeEventListener(s,pasteHandler,!1):this.detachEvent&&this.detachEvent("on"+s,pasteHandler)}},e.extend({mask:{rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:!1,textAlign:!0,selectCharsOnFocus:!0,autoTab:!1,setSize:!1,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){},onFocus:function(e,t){},onBlur:function(e,t){}},masks:{phone:{mask:"(99) 9999-9999"},"phone-11":{mask:"(99) 99999-9999"},"phone-us":{mask:"(999) 999-9999"},cpf:{mask:"999.999.999-99"},cnpj:{mask:"99.999.999/9999-99"},date:{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},cep:{mask:"99999-999"},time:{mask:"29:59"},cc:{mask:"9999 9999 9999 9999"},integer:{mask:"999.999.999.999",type:"reverse"},decimal:{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"}},init:function(){if(!this.hasInit){var t,a=this,s=this.keyRepresentation;for(this.ignore=!1,t=0;t<=9;t++)this.rules[t]=new RegExp("[0-"+t+"]");this.keyRep=s,this.ignoreKeys=[],e.each(s,(function(e){a.ignoreKeys.push(parseInt(e,10))})),this.hasInit=!0}},set:function(t,a){var s=this,n=e(t),r="maxLength";return a=a||{},this.init(),n.each((function(){a.attr&&(s.options.attr=a.attr);var t,n=e(this),i=e.extend({},s.options),o=n.attr(i.attr);if((t="string"==typeof a?a:""!==o?o:null)&&(i.mask=t),s.masks[t]&&(i=e.extend(i,s.masks[t])),"object"==typeof a&&a.constructor!=Array&&(i=e.extend(i,a)),e.metadata&&(i=e.extend(i,n.metadata())),null!=i.mask){i.mask+="",n.data("mask")&&s.unset(n);var l=i.defaultValue,u="reverse"===i.type,h=new RegExp(i.fixedChars,"g");if(-1===i.maxLength&&(i.maxLength=n.attr(r)),"fixed"!=(i=e.extend({},i,{fixedCharsReg:new RegExp(i.fixedChars),fixedCharsRegG:h,maskArray:i.mask.split(""),maskNonFixedCharsArray:i.mask.replace(h,"").split("")})).type&&!u||!i.setSize||n.attr("size")||n.attr("size",i.mask.length),u&&i.textAlign&&n.css("text-align","right"),""!==this.value||""!==l){var d=s.string(""!==this.value?this.value:l,i);this.defaultValue=d,n.val(d)}"infinite"==i.type&&(i.type="repeat"),n.data("mask",i),n.removeAttr(r),n.bind("keydown.mask",{func:s._onKeyDown,thisObj:s},s._onMask).bind("keypress.mask",{func:s._onKeyPress,thisObj:s},s._onMask).bind("keyup.mask",{func:s._onKeyUp,thisObj:s},s._onMask).bind("paste.mask",{func:s._onPaste,thisObj:s},s._onMask).bind("drop.mask",{func:s._onPaste,thisObj:s},s._onMask).bind("focus.mask",s._onFocus).bind("blur.mask",s._onBlur).bind("change.mask",s._onChange)}}))},unset:function(t){return e(t).each((function(){var t=e(this);if(t.data("mask")){var a=t.data("mask").maxLength;-1!=a&&t.attr("maxLength",a),t.unbind(".mask").removeData("mask")}}))},string:function(t,a){this.init();var s={};switch("string"!=typeof t&&(t=String(t)),typeof a){case"string":this.masks[a]?s=e.extend(s,this.masks[a]):s.mask=a;break;case"object":s=a}s.fixedChars||(s.fixedChars=this.options.fixedChars);var n=new RegExp(s.fixedChars),r=new RegExp(s.fixedChars,"g");if("reverse"===s.type&&s.defaultValue&&void 0!==this.signals[s.defaultValue.charAt(0)]){var i=t.charAt(0);s.signal=void 0!==this.signals[i]?this.signals[i]:this.signals[s.defaultValue.charAt(0)],s.defaultValue=s.defaultValue.substring(1)}return this.__maskArray(t.split(""),s.mask.replace(r,"").split(""),s.mask.split(""),s.type,s.maxLength,s.defaultValue,n,s.signal)},_onFocus:function(t){var a=e(this),s=a.data("mask");s.inputFocusValue=a.val(),s.changed=!1,s.selectCharsOnFocus&&a.select(),s.onFocus(this,t)},_onBlur:function(t){var a=e(this),s=a.data("mask");s.inputFocusValue==a.val()||s.changed||a.trigger("change"),s.onBlur(this,t)},_onChange:function(t){e(this).data("mask").changed=!0},_onMask:function(t){var a=t.data.thisObj,s={};return s._this=t.target,s.$this=e(s._this),s.data=s.$this.data("mask"),!(!s.$this.attr("readonly")&&s.data)||(s[s.data.type]=!0,s.value=s.$this.val(),s.nKey=a.__getKeyNumber(t),s.range=a.__getRange(s._this),s.valueArray=s.value.split(""),t.data.func.call(a,t,s))},_onKeyDown:function(t,s){if(this.ignore=e.inArray(s.nKey,this.ignoreKeys)>-1||(t.ctrlKey||t.metaKey||t.altKey)&&t.key,this.ignore){var n=this.keyRep[s.nKey];s.data.onValid.call(s._this,n||"",s.nKey)}return!a||this._onKeyPress(t,s)},_onKeyUp:function(e,t){return 9===t.nKey||16===t.nKey||(t.repeat?(this.__autoTab(t),!0):this._onPaste(e,t))},_onPaste:function(t,a){a.reverse&&this.__changeSignal(t.type,a);var s=this.__maskArray(a.valueArray,a.data.maskNonFixedCharsArray,a.data.maskArray,a.data.type,a.data.maxLength,a.data.defaultValue,a.data.fixedCharsReg,a.data.signal);return a.$this.val(s),!a.reverse&&a.data.defaultValue.length&&a.range.start===a.range.end&&this.__setRange(a._this,a.range.start,a.range.end),!e.browser.msie&&!e.browser.safari||a.reverse||this.__setRange(a._this,a.range.start,a.range.end),this.ignore||this.__autoTab(a),!0},_onKeyPress:function(e,t){if(this.ignore)return!0;t.reverse&&this.__changeSignal(e.type,t);var a=String.fromCharCode(t.nKey),s=t.range.start,n=t.value,r=t.data.maskArray;if(t.reverse){var i=n.substr(0,s),o=n.substr(t.range.end,n.length);n=i+a+o,t.data.signal&&s-t.data.signal.length>0&&(s-=t.data.signal.length)}var l=n.replace(t.data.fixedCharsRegG,"").split(""),u=this.__extraPositionsTill(s,r,t.data.fixedCharsReg);if(t.rsEp=s+u,t.repeat&&(t.rsEp=0),!this.rules[r[t.rsEp]]||-1!=t.data.maxLength&&l.length>=t.data.maxLength&&t.repeat)return t.data.onOverflow.call(t._this,a,t.nKey),!1;if(!this.rules[r[t.rsEp]].test(a))return t.data.onInvalid.call(t._this,a,t.nKey),!1;t.data.onValid.call(t._this,a,t.nKey);var h=this.__maskArray(l,t.data.maskNonFixedCharsArray,r,t.data.type,t.data.maxLength,t.data.defaultValue,t.data.fixedCharsReg,t.data.signal,u);return t.repeat||t.$this.val(h),t.reverse?this._keyPressReverse(e,t):!t.fixed||this._keyPressFixed(e,t)},_keyPressFixed:function(e,t){return t.range.start==t.range.end?(0===t.rsEp&&0===t.value.length||t.rsEp<t.value.length)&&this.__setRange(t._this,t.rsEp,t.rsEp+1):this.__setRange(t._this,t.range.start,t.range.end),!0},_keyPressReverse:function(t,a){return e.browser.msie&&(0===a.range.start&&0===a.range.end||a.range.start!=a.range.end)&&this.__setRange(a._this,a.value.length),!1},__autoTab:function(e){if(e.data.autoTab&&(e.$this.val().length>=e.data.maskArray.length&&!e.repeat||-1!=e.data.maxLength&&e.valueArray.length>=e.data.maxLength&&e.repeat)){var t=this.__getNextInput(e._this,e.data.autoTab);t&&(e.$this.trigger("blur"),t.focus().select())}},__changeSignal:function(e,t){if(!1!==t.data.signal){var a="paste"===e?t.value.charAt(0):String.fromCharCode(t.nKey);this.signals&&void 0!==this.signals[a]&&(t.data.signal=this.signals[a])}},__getKeyNumber:function(e){return e.charCode||e.keyCode||e.which},__maskArray:function(e,t,a,s,n,r,i,o,l){switch("reverse"===s&&e.reverse(),e=this.__removeInvalidChars(e,t,"repeat"===s||"infinite"===s),r&&(e=this.__applyDefaultValue.call(e,r)),e=this.__applyMask(e,a,l,i),s){case"reverse":return e.reverse(),(o||"")+e.join("").substring(e.length-a.length);case"infinite":case"repeat":var u=e.join("");return-1!==n&&e.length>=n?u.substring(0,n):u;default:return e.join("").substring(0,a.length)}return""},__applyDefaultValue:function(e){var t,a=e.length;for(t=this.length-1;t>=0&&this[t]==e.charAt(0);t--)this.pop();for(t=0;t<a;t++)this[t]||(this[t]=e.charAt(t));return this},__removeInvalidChars:function(e,t,a){for(var s=0,n=0;s<e.length;s++)t[n]&&this.rules[t[n]]&&!this.rules[t[n]].test(e[s])&&(e.splice(s,1),a||n--,s--),a||n++;return e},__applyMask:function(e,t,a,s){void 0===a&&(a=0);for(var n=0;n<e.length+a;n++)t[n]&&s.test(t[n])&&e.splice(n,0,t[n]);return e},__extraPositionsTill:function(e,t,a){for(var s=0;a.test(t[e++]);)s++;return s},__getNextInput:function(t,a){var s=t.form;if(null==s)return null;var n,r=s.elements,i=e.inArray(t,r)+1,o=r.length,l=null;for(n=i;n<o;n++)if(l=e(r[n]),this.__isNextInput(l,a))return l;var u,h,d=document.forms,g=e.inArray(t.form,d)+1,c=d.length;for(u=g;u<c;u++)for(o=(h=d[u].elements).length,n=0;n<o;n++)if(l=e(h[n]),this.__isNextInput(l,a))return l;return null},__isNextInput:function(e,t){var a=e.get(0);return a&&(a.offsetWidth>0||a.offsetHeight>0)&&"FIELDSET"!=a.nodeName&&(!0===t||"string"==typeof t&&e.is(t))},__setRange:function(e,t,a){if(void 0===a&&(a=t),e.setSelectionRange)e.setSelectionRange(t,a);else{var s=e.createTextRange();s.collapse(),s.moveStart("character",t),s.moveEnd("character",a-t),s.select()}},__getRange:function(t){if(!e.browser.msie&&!e.browser.android)return{start:t.selectionStart,end:t.selectionEnd};var a={start:0,end:0},s=document.selection.createRange();return a.start=0-s.duplicate().moveStart("character",-1e5),a.end=a.start+s.text.length,a},unmaskedVal:function(t){return e(t).val().replace(e.mask.fixedCharsRegG,"")}}}),e.fn.extend({setMask:function(t){return e.mask.set(this,t)},unsetMask:function(){return e.mask.unset(this)},unmaskedVal:function(){return e.mask.unmaskedVal(this[0])}})}(jQuery);
