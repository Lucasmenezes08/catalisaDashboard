const ESTADOS={AC:"1",AL:"2",AM:"4",AP:"3",BA:"5",CE:"6",DF:"7",ES:"8",GO:"10",MA:"11",MG:"14",MS:"13",MT:"12",PA:"15",PB:"16",PE:"18",PI:"19",PR:"17",RJ:"20",RN:"21",RO:"23",RR:"9",RS:"22",SC:"25",SE:"27",SP:"26",TO:"24"};function setCookie(e,t,o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var a="expires="+n.toUTCString();document.cookie=e+"="+t+";"+a+";domain=.sebrae.com.br;path=/"}function defineLocation(e,t){document.getElementById("estadoSelecionado").innerHTML=e,document.getElementById("estadoAtual").innerHTML=e,document.getElementById("setLocation").style.display="none",document.getElementById("setLocation2").style.display="none",document.getElementById("changeLocation").style.display="block",document.getElementById("estados__location-selected").classList.add("active"),document.getElementById("submenu_estados").classList.add("location-selected"),document.getElementById("content__location").setAttribute("class","sb-structure__header__content__nav__menu__location active"),document.getElementById("atualFlag").setAttribute("class",`sb-ico-flag__${t.toLowerCase()}`),document.getElementById("estadoAtual").setAttribute("href",document.getElementById("menu-estado-"+t.toLowerCase()).getAttribute("href")),setCookie("filtrosPortfolio",'{"estado":'+ESTADOS[t]+"}",1),setCookie("filtrosPortfolio",'{"produto":"","pagina":"1","estado":'+ESTADOS[t]+',"cidade":"","formato":"","solucao":"","oferta":"","perfil":"","tema":"","busca":"","dataIni":"","dataFin":"","ordem":"data"}',1),setCookie("filtrosPortfolioMei",'{"estado":'+ESTADOS[t]+"}",1),setCookie("filtrosPortfolioMei",'{"produto":"","pagina":"1","estado":'+ESTADOS[t]+',"cidade":"","formato":"","solucao":"","oferta":"","perfil":"","tema":"","busca":"","dataIni":"","dataFin":"","ordem":"data"}',1)}function searchSebrae(){document.cookie.replace("sessionData=","").split("|");let e=document.getElementById("search").value;""!=e&&document.getElementById("searchLink").setAttribute("href",window.urlAmbiente+`/sites/PortalSebrae/Busca?q=${e}`)}function searchClick(){let e=document.getElementById("searchLink");e.href&&e.click()}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(setPosition):console.log("O seu navegador não suporta Geolocalização.")}function setPosition(e,t){$.getJSON("/Sebrae/Portal Sebrae/resources/js/amei/endpoints.json",(function(o){$.ajax({type:"GET",url:o.geolocation+"/v1/geo",data:{latitude:e.coords.latitude,longitude:e.coords.longitude},contentType:"application/json; charset=utf-8",success:function(e){t?t(e):($("#selectModalLocation").val(e.properties.uf),showConfirmationButton(document.getElementById("selectModalLocation")))}})}))}function showConfirmationButton(e){$("#location-confirm-button").css("display","inline-block"),$("#location-confirm-button").attr("data-sb-rotulo",e.options[e.selectedIndex].text)}function searchSebrae(){document.cookie.replace("sessionData=","").split("|");document.getElementById("search").value}function searchSuggestions(){var e=$("#search").val(),t=$("#search_autocomplete");if(t.html(""),$(this).parent().find(".sb-components__autocomplete").removeClass("active"),e.length>2){var o=new XMLHttpRequest;o.open("GET",window.urlAmbiente+"/sebraena-templating/controller/buscaSuggestions/list?q="+e,!1),o.send();var n=JSON.parse(o.responseText);null!=n&&n.length>0&&($.each(n,(function(e,o){var n=$("<li>");n.html(o),n.click((function(){window.location.href=window.urlAmbiente+"/sites/PortalSebrae/Busca?q="+this.innerHTML})),t.append(n)})),$(this).parent().find(".sb-components__autocomplete").addClass("active"),searchClickLink())}}function busca404(){if(13===event.keyCode)submit.click();else{var e=$("#input_pesquisar").val(),t=$("#search404_autocomplete");if(t.html(""),$(this).parent().find(".sb-components__autocomplete").removeClass("active"),e.length>2){var o=new XMLHttpRequest;o.open("GET",window.urlAmbiente+"/sebraena-templating/controller/buscaSuggestions/list?q="+e,!1),o.send();var n=JSON.parse(o.responseText);null!=n&&n.length>0&&($.each(n,(function(e,o){var n=$("<li>");n.html(o),n.click((function(){window.location.href=window.urlAmbiente+"/sites/PortalSebrae/Busca?q="+this.innerHTML})),t.append(n)})),$(this).parent().find(".sb-components__autocomplete").addClass("active"))}}}function searchClickLink(){document.getElementById("searchLink")&&document.getElementById("searchLink").setAttribute("href","javascript:searchClickHref();")}function searchClickHref(){var e=document.getElementById("search").value;window.location.href=window.urlAmbiente+"/sites/PortalSebrae/Busca?q="+e}function searchClick(){document.getElementById("searchLink").href}function updateStateCookie(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&200===o.status&&(setCookie("STATENAME",encodeURI(e),1),setCookie("STATEINITIALS",t,1),setCookie("STATE",ESTADOS[t],1),getKeycloak((function(e){e.authenticated?setCookie("LOCATION_SOURCE","LOGGED_IN",1):setCookie("LOCATION_SOURCE","LOGGED_OUT",1),updateComponentsGeolocation()})))},o.open("Get",window.urlAmbiente+"/sebraena-templating/controller/util/cookie/clean/"),o.send()}function openLocationModal(){getCookie("LOCATION_MODAL_OPEN")||(document.getElementsByTagName("html")[0].style.overflow="hidden",document.getElementById("location-modal").style.display="block"),document.cookie="LOCATION_MODAL_OPEN=1;domain=.sebrae.com.br;path=/"}function presetLocation(){navigator.permissions.query({name:"geolocation"}).then((e=>{"granted"==e.state?navigator.geolocation.getCurrentPosition((function(e){setPosition(e,(function(e){defineLocation(e.properties.estado,e.properties.uf),updateStateCookie(e.properties.estado,e.properties.uf)}))})):(document.getElementsByTagName("html")[0].style.overflow="hidden",document.getElementById("location-modal").style.display="block")}))}function predefineLocation(){navigator.permissions.query({name:"geolocation"}).then((e=>{"granted"==e.state&&getLocation()}))}function changeLocation(){let e=document.getElementById("selectModalLocation"),t=document.getElementById("selectModalLocation").value,o=e.options[e.selectedIndex].innerHTML;document.getElementsByTagName("html")[0].style.overflow="",document.getElementsByTagName("body")[0].style.overflow="",document.getElementById("location-modal").style.display="none",defineLocation(o,t),updateStateCookie(o,t)}function getCookie(e){const t=`; ${document.cookie}`.split(";").filter((e=>e.length>0)).map((e=>e.trim())).map((e=>e.split("="))).reduce(((e,t)=>({...e,[t[0]]:t[1]})),{});return t.hasOwnProperty(e)?t[e]:null}function sessionLocation(){let e=getCookie("STATENAME"),t=getCookie("STATEINITIALS");null!=e&&null!=t&&defineLocation(decodeURI(e),t)}function requireLogout(){document.cookie.replace("sessionData=","").split("|")!=[]&&(document.cookie="sessionData="),window.location.href=urlAmbiente+"/sites/PortalSebrae/logout"}function buildHeader(e){if(null!=getCookie("STATENAME")&&null!=getCookie("STATEINITIALS")?sessionLocation():document.getElementById("changeLocation2").style.display="none",document.getElementById("user__status").style.display="",null==e.tokenParsed)document.getElementById("user__status").setAttribute("class","sb-structure__header__content__nav__menu__submenu user"),document.getElementById("iniciais").style.display="none",document.getElementById("user-profile").style.display="none",document.getElementById("user__login").style.display="flex",document.getElementById("sb-userDataHeader").style.display="none",document.getElementById("user-profile").addEventListener("click",(function(){redirectToMural()}));else{if(document.getElementById("user__login").style.display="none",document.getElementById("user-profile").style.display="block",document.getElementById("user__status").setAttribute("class","sb-structure__header__content__nav__menu__submenu user logged"),document.getElementById("nameMenuHeader").innerText=e.tokenParsed.name,document.getElementById("sb-email").innerHTML=e.tokenParsed.email,document.getElementsByClassName("sb-iniciais")[0].innerText=e.tokenParsed.given_name[0].toUpperCase()+e.tokenParsed.family_name[0].toUpperCase(),document.getElementsByClassName("sb-iniciais")[1].innerText=e.tokenParsed.given_name[0].toUpperCase()+e.tokenParsed.family_name[0].toUpperCase(),e.tokenParsed.foto)for(var t=document.getElementsByClassName("user__name__img"),o=0;o<t.length;o++){t[o].innerHTML='<img src="'+e.tokenParsed.foto+'" />'}var n=document.querySelectorAll('[url-amei="url-amei"]');for(o=0;o<n.length;o++){var a=n[o],i=a.href,s=[];s.push("referrer_uri="+encodeURI(window.location.href)),s.push("referrer_name="+encodeURI("o Portal Sebrae")),a.href=i+(-1==i.indexOf("?")?"?":"&")+s.join("&")}}verifyDisplayNoneAboutUs()}function localizacaoAutomatica(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=new XMLHttpRequest;t.open("GET",urlAmbiente+"/Sebrae/Portal Sebrae/resources/js/amei/endpoints.json",!1),t.send();var o=JSON.parse(t.responseText);t.open("GET",o.geolocation+"/v1/geo?latitude="+e.coords.latitude+"&longitude="+e.coords.longitude,!1),t.send();var n=JSON.parse(t.responseText);let a=document.getElementById("selectModalLocation");for(var i=0;i<a.options.length;i++)a.options[i].value==n.properties.uf&&(a.options[i].selected=!0);document.getElementsByTagName("html")[0].style.overflow="auto",document.getElementById("location-modal").style.display="none",changeLocation()})):console.log("O seu navegador não suporta Geolocalização.")}function setClickMenuSubMenu(e,t){var o=new XMLHttpRequest;o.open("GET",window.urlAmbiente+"/Sebrae/Portal Sebrae/resources/json/datalayerpush-header-footer.json?v="+(new Date).getTime(),!1),o.send();var{componentDataLayerPushHeaderEnable:n}=JSON.parse(o.responseText),{debugMode:a}=JSON.parse(o.responseText);0==n?(console.log("componentDataLayerPushHeaderEnable Bloqueado"),a&&alert("[ClickMenu] Configuração de evento bloqueado "+e.trim()+" - "+t.trim())):(console.log("componentDataLayerPushHeaderEnable Liberado"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"submenu_click",menuPrincipal:e,submenuItem:t,cliqueMenu:e+" "+t,event_time:(new Date).toISOString()}),a&&alert("[ClickMenu] Evento registrado com sucesso "+e.trim()+" - "+t.trim()))}function setClickExplorar(e,t){var o=new XMLHttpRequest;o.open("GET",window.urlAmbiente+"/Sebrae/Portal Sebrae/resources/json/datalayerpush-header-footer.json?v="+(new Date).getTime(),!1),o.send();var{componentDataLayerPushFooterEnable:n}=JSON.parse(o.responseText),{debugMode:a}=JSON.parse(o.responseText);0==n?(console.log("componentDataLayerPushFooterEnable Bloqueado"),a&&alert("[Explorar] Configuração de evento bloqueado : "+e.trim()+" - "+t)):(console.log("componentDataLayerPushFooterEnable Liberado"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"explorar_item_click",link_text:e.trim(),link_url:t,event_time:(new Date).toISOString()}),a&&alert("[Explorar] Evento registrado com sucesso : "+e.trim()+" - "+t)),event.preventDefault(),window.location.href=t}function setClickFooter(e,t){var o=new XMLHttpRequest;o.open("GET",window.urlAmbiente+"/Sebrae/Portal Sebrae/resources/json/datalayerpush-header-footer.json?v="+(new Date).getTime(),!1),o.send();var{componentDataLayerPushFooterEnable:n}=JSON.parse(o.responseText),{debugMode:a}=JSON.parse(o.responseText);0==n?(console.log("componentDataLayerPushFooterEnable Bloqueado"),a&&alert("[Footer] Configuração de evento bloqueado : "+e.trim())):(console.log("componentDataLayerPushFooterEnable Liberado"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"footer_click",click_text:e.trim(),click_item:t,event_time:(new Date).toISOString()}),a&&alert("[Footer] Evento registrado com sucesso : "+e.trim())),event.preventDefault(),window.location.href=t}function verifyDisplayNoneAboutUs(){var e=new XMLHttpRequest;e.open("GET",window.urlAmbiente+"/Sebrae/Portal Sebrae/resources/json/datalayerpush-header-footer.json?v="+(new Date).getTime(),!1),e.send();var{isLinksAboutUsEnable:t}=JSON.parse(e.responseText);0==t?(console.log("isLinksAboutUsEnable Bloqueado"),$("#about_us").css("display","none")):console.log("isLinksAboutUsEnable Liberado")}function titleWithLimitTrim(e,t){(!t||null==t||t<0)&&(t=30);var o=/<a[^>]*>(.*?)<\/a>/,n="";return o.exec(e)&&(n=o.exec(e)[1]),n.length>t&&(n=n.substring(0,t)),n.trim()}searchClickLink(),getKeycloak((function(e){if(buildHeader(e),e.authenticated&&(!getCookie("STATE")||"LOGGED_IN"!=getCookie("LOCATION_SOURCE"))){let o=e.tokenParsed.uf,n=document.getElementById("selectModalLocation");for(var t=0;t<n.options.length;t++)if(n.options[t].value==o){let e=n.options[t].innerText;updateStateCookie(e,o),defineLocation(e,o)}}})),document.getElementById("setLocation").addEventListener("click",presetLocation,!1),document.getElementById("setLocation2").addEventListener("click",presetLocation,!1),document.getElementById("changeLocation").addEventListener("click",predefineLocation,!1),document.getElementById("changeLocation2").addEventListener("click",predefineLocation,!1),document.getElementById("search").addEventListener("keyup",searchSuggestions,!1),document.addEventListener("DOMContentLoaded",(function(e){$("#company-header").text("Minha empresa"),null!==document.getElementById("input_pesquisar")&&void 0!==document.getElementById("input_pesquisar")&&document.getElementById("input_pesquisar").addEventListener("keyup",busca404,!1)}));

